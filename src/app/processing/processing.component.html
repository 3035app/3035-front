<app-header></app-header>
<main class="container pia-mainContainer pia-mainContainerBlock">
    <div class="row">
        <!-- Left sidebar (sections) -->
        <div class="small-12 medium-3 columns">
            <app-sections [currentProcessingSection]="currentSection" [processing]="processing" [processingSections]="processingSections" (changeProcessingSectionEvent)="changeSection($event)"></app-sections>
        </div>

        <!-- Main form content -->
        <div class="small-12 medium-6 columns">
            <app-processing-form [processing]="processing" [sections]="sections" [currentSection]="currentSection"></app-processing-form>

            <div class="processing-bottom-nav">
                <a *ngIf="currentSection.id > 1" class="processing-previous" (click)="changeSection(currentSection.id - 1)">
                    <i class="fa fa-angle-double-left" aria-hidden="true"></i>
                    {{ 'processing.form.previous' | translate }}
                </a>
                <a *ngIf="currentSection.id < 4" class="processing-next" (click)="changeSection(currentSection.id + 1)">
                    {{ 'processing.form.next' | translate }}
                    <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                </a>
                <span *ngIf="currentSection.id == 4 && processing.pias_count == 0" >
                    <a class="processing-next" (click)="createPia()" *ngxPermissionsOnly="['CanCreatePIA']">
                        {{ 'processing.form.risk_evaluation' | translate }}
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    </a>
                </span>
                <span *ngIf="currentSection.id == 4 && processing.pias_count > 0 && pias">
                    <a class="processing-next" routerLink="/entry/{{pias[0].id}}/section/3/item/1">
                        {{ 'processing.form.risk_evaluation' | translate }}
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    </a>
                </span>
            </div>
        </div>

        <!-- Right sidebar (knowledge base) -->
        <div class="small-12 medium-3 columns">
            <div class="pia-rightSidebar">
                <app-knowledge-base [item]=""></app-knowledge-base>
            </div>
        </div>
    </div>
</main>

<app-modals [processing]="processing"></app-modals>
