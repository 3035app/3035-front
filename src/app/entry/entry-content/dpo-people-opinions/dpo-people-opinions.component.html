<div class="pia-ValidationDPO">
  <div class="pia-entryContentBlock-content">
    <!-- RSSI opinions -->
    <div class="pia-entryContentBlock-content-people">
      <div>
        <h2>{{ 'opinions.rssi_opinion' | translate }}</h2>
      </div>
      <ng-container *ngIf="_sidStatusService.enableDpoValidation; else disableRssiBLock">
    
        <!-- Opinion searched or not searched -->
        <form style="margin-top:16px;" [formGroup]="rssiSearchedOpinionsForm">
          <div class="pia-entryContentBlock-content-people-treatment">
            <div (click)="enableRssiSearchedOpinionRadioButtons()">
              <input type="radio" id="rssi-choice-searched"
                [attr.dirty]="_piaService.pia.requested_hiss_opinion === true"
                [checked]="_piaService.pia.requested_hiss_opinion === true"
                (change)="rssiSearchedOpinionsFocusOut()"
                disabled
                formControlName="rssiSearchStatus" value="true">
              <label for="rssi-choice-searched">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-check" aria-hidden="true"></i>
                <span>{{ 'summary.rssi_search_status_ok' | translate }}</span>
              </label>
            </div>
            <div (click)="enableRssiSearchedOpinionRadioButtons()">
              <input type="radio" id="rssi-choice-unsearched"
                [attr.dirty]="_piaService.pia.requested_hiss_opinion === false"
                [checked]="_piaService.pia.requested_hiss_opinion === false"
                (change)="rssiSearchedOpinionsFocusOut()"
                disabled
                formControlName="rssiSearchStatus" value="false">
              <label for="rssi-choice-unsearched">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-close" aria-hidden="true"></i>
                <span>{{ 'summary.rssi_search_status_nok' | translate }}</span>
              </label>
            </div>
          </div>
          <div (click)="rssiSearchContentFocusIn()" *ngIf="displayRssiSearchContent"
            class="pia-entryContentBlock-content-DPO-reasons">
            <textarea (focusout)="rssiSearchContentFocusOut()" (keyup)="autoTextareaResize($event)"
              id="pia-rssi-search-content" rows="8" formControlName="rssiSearchContent" cols="50"
              placeholder="{{ 'opinions.placeholder_rssi_search_content' | translate }}" disabled></textarea>
          </div>
        </form>

        <!-- Opinion content -->
        <form style="margin-top:30px;" *ngIf="displayRssiOpinion" (click)="checkRssiName()"
          [formGroup]="rssiForm">
          <p>
            <span>
              <ng-container *ngIf="!_piaService.pia.status || _piaService.pia.status < 2; else displayNames2">
                <div style="display:inline-block;" (click)="rssiNameFocusIn()">
                  <input #PeopleNames type="text" class="DPOName" (change)="rssiNameFocusOut()"
                    formControlName="rssiNames"
                    placeholder="{{ 'opinions.placeholder_rssi_name' | translate }}"
                    disabled
                  >
                </div>
              </ng-container>
              <ng-template #displayNames2>
                {{ _piaService.pia.hiss_name }}
              </ng-template>
            </span>{{ 'opinions.content' | translate }}
          </p>
          <div class="pia-entryContentBlock-content-people-treatment">
            <div (click)="enableRssiStatusRadioButtons()">
              <input type="radio" id="dpoAvis-3" [checked]="_piaService.pia.hiss_processing_implemented_status == 1"
                (change)="rssiStatusFocusOut()"
                formControlName="rssiStatus" value="1"
                disabled
              >
              <label for="dpoAvis-3">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-check" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_ok' | translate }}</span>
              </label>
            </div>
            <div (click)="enableRssiStatusRadioButtons()">
              <input type="radio" id="dpoAvis-4" [checked]="_piaService.pia.hiss_processing_implemented_status == 0"
                (change)="rssiStatusFocusOut()"
                formControlName="rssiStatus" value="0"
                disabled
              >
              <label for="dpoAvis-4">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-close" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_nok' | translate }}</span>
              </label>
            </div>
          </div>
          <div (click)="rssiOpinionFocusIn()" class="pia-entryContentBlock-content-people-reasons">
            <textarea (focusout)="rssiOpinionFocusOut()" (keyup)="autoTextareaResize($event)"
              id="pia-opinions-rssi" rows="8" formControlName="rssiOpinion" cols="50"
              placeholder="{{ 'opinions.placeholder_rssi_opinion' | translate }}" disabled></textarea>
          </div>
        </form>
      </ng-container>
      <ng-template #disableRssiBLock>
        {{ 'opinions.treatment_lock' | translate }}
      </ng-template>
    </div>
    <!-- DPO opinions -->
    <div class="pia-entryContentBlock-content-DPO">
      <div>
        <h2>{{ 'opinions.dpo_opinion' | translate }}</h2>
      </div>
      <ng-container *ngIf="_sidStatusService.enableDpoValidation; else disableDpoBLock">
        <form (click)="checkDpoName()" [formGroup]="DPOForm">
          <p>
            <span>
              <ng-container *ngIf="!_piaService.pia.status || _piaService.pia.status < 2; else displayNames1">
                <div style="display:inline-block;" (click)="dpoNameFocusIn()">
                  <input (focusout)="dpoNameFocusOut()" #DpoNames type="text" class="DPOName" formControlName="DPONames" placeholder="{{ 'opinions.placeholder_dpo_name' | translate }}" disabled>
                </div>
              </ng-container>
              <ng-template #displayNames1>
                {{ _piaService.pia.dpos_names }}
              </ng-template>
            </span>{{ 'opinions.content' | translate }}
          </p>
          <div class="pia-entryContentBlock-content-DPO-treatment">
            <div (click)="enableDpoStatusRadioButtons()">
              <input type="radio"
                     id="treatment-1"
                     [attr.dirty]="_piaService.pia.dpo_status === 1"
                     [checked]="_piaService.pia.dpo_status === 1"
                     (change)="dpoStatusFocusOut()"
                     disabled
                     formControlName="DPOStatus"
                     value="1">
              <label for="treatment-1">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-check" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_ok' | translate }}</span>
              </label>
            </div>
            <div (click)="enableDpoStatusRadioButtons()">
              <input type="radio"
                     id="treatment-2"
                     [attr.dirty]="_piaService.pia.dpo_status === 0"
                     [checked]="_piaService.pia.dpo_status === 0"
                     (change)="dpoStatusFocusOut()"
                     disabled
                     formControlName="DPOStatus"
                     value="0">
              <label for="treatment-2">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-close" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_nok' | translate }}</span>
              </label>
            </div>
          </div>
          <div (click)="dpoOpinionFocusIn()" class="pia-entryContentBlock-content-DPO-reasons">
            <textarea (focusout)="dpoOpinionFocusOut()" (keyup)="autoTextareaResize($event)" id="pia-opinions-dpo" formControlName="DPOOpinion" rows="8" cols="50" placeholder="{{ 'opinions.placeholder_dpo_opinion' | translate }}" disabled></textarea>
          </div>
        </form>
      </ng-container>

      <ng-template #disableDpoBLock>
        {{ 'opinions.dpo_lock' | translate }}
      </ng-template>

    </div>

    <!-- Concerned people opinions -->
    <div class="pia-entryContentBlock-content-people">
      <div>
        <h2>{{ 'opinions.people_opinion' | translate }}</h2>
      </div>
      <ng-container *ngIf="_sidStatusService.enableDpoValidation; else disableConcernedPeopleBLock">

        <!-- Opinions searched or not searched -->
        <form style="margin-top:16px;" [formGroup]="searchedOpinionsForm">
          <div class="pia-entryContentBlock-content-people-treatment">
            <div (click)="enableConcernedPeopleSearchedOpinionRadioButtons()">
              <input type="radio"
                      id="concerned-people-choice-searched"
                      [attr.dirty]="_piaService.pia.concerned_people_searched_opinion === true"
                      [checked]="_piaService.pia.concerned_people_searched_opinion === true"
                      (change)="searchedOpinionsFocusOut()"
                      disabled
                      formControlName="searchStatus"
                      value="true">
              <label for="concerned-people-choice-searched">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-check" aria-hidden="true"></i>
                <span>{{ 'summary.people_search_status_ok' | translate }}</span>
              </label>
            </div>
            <div (click)="enableConcernedPeopleSearchedOpinionRadioButtons()">
              <input type="radio"
                      id="concerned-people-choice-unsearched"
                      [attr.dirty]="_piaService.pia.concerned_people_searched_opinion === false"
                      [checked]="_piaService.pia.concerned_people_searched_opinion === false"
                      (change)="searchedOpinionsFocusOut()"
                      disabled
                      formControlName="searchStatus"
                      value="false">
              <label for="concerned-people-choice-unsearched">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-close" aria-hidden="true"></i>
                <span>{{ 'summary.people_search_status_nok' | translate }}</span>
              </label>
            </div>
          </div>
          <div (click)="peopleSearchContentFocusIn()" *ngIf="displayPeopleSearchContent" class="pia-entryContentBlock-content-DPO-reasons">
            <textarea (focusout)="peopleSearchContentFocusOut()" (keyup)="autoTextareaResize($event)" id="pia-people-search-content" rows="8" formControlName="searchContent" cols="50" placeholder="{{ 'opinions.placeholder_search_content' | translate }}" disabled></textarea>
          </div>
        </form>

        <!-- Opinions content -->
        <form style="margin-top:30px;" *ngIf="displayPeopleOpinions" (click)="checkConcernedPeopleName()" [formGroup]="peopleForm">
          <p>
            <span>
              <ng-container *ngIf="!_piaService.pia.status || _piaService.pia.status < 2; else displayNames2">
                <div style="display:inline-block;" (click)="concernedPeopleNameFocusIn()">
                  <input #PeopleNames type="text" class="DPOName" (change)="concernedPeopleNameFocusOut()" formControlName="peopleNames" placeholder="{{ 'opinions.placeholder_concerned_people_name' | translate }}" disabled>
                </div>
              </ng-container>
              <ng-template #displayNames2>
                {{ _piaService.pia.people_names }}
              </ng-template>
            </span>{{ 'opinions.content' | translate }}
          </p>
          <div class="pia-entryContentBlock-content-people-treatment">
            <div (click)="enableConcernedPeopleStatusRadioButtons()">
              <input type="radio"
                      id="dpoAvis-1"
                      [checked]="_piaService.pia.concerned_people_status == 1"
                      (change)="concernedPeopleStatusFocusOut()"
                      formControlName="peopleStatus"
                      value="1"
                      disabled>
              <label for="dpoAvis-1">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-check" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_ok' | translate }}</span>
              </label>
            </div>
            <div (click)="enableConcernedPeopleStatusRadioButtons()">
              <input type="radio"
                      id="dpoAvis-2"
                      [checked]="_piaService.pia.concerned_people_status == 0"
                      (change)="concernedPeopleStatusFocusOut()"
                      formControlName="peopleStatus"
                      value="0"
                      disabled>
              <label for="dpoAvis-2">
                <i class="fa fa-circle" aria-hidden="true"></i>
                <i class="fa fa-close" aria-hidden="true"></i>
                <span>{{ 'opinions.treatment_nok' | translate }}</span>
              </label>
            </div>
          </div>
          <div (click)="concernedPeopleOpinionFocusIn()" class="pia-entryContentBlock-content-people-reasons">
            <textarea (focusout)="concernedPeopleopinionFocusOut()" (keyup)="autoTextareaResize($event)" id="pia-opinions-people" rows="8" formControlName="peopleOpinion" cols="50" placeholder="{{ 'opinions.placeholder_people_opinion' | translate }}" disabled></textarea>
          </div>
        </form>
      </ng-container>
      <ng-template #disableConcernedPeopleBLock>
          {{ 'opinions.treatment_lock' | translate }}
        </ng-template>
    </div>

  </div>
</div>
